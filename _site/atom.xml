<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Nicholas Rossi</title>
  <link href="http://nicholasarossi.github,io/atom.xml" rel="self"/>
  <link href="http://nicholasarossi.github.io/"/>
  <updated>2017-03-26T22:21:54-04:00</updated>
  <id>http://rsms.me/</id>
  <author>
    <name>Nicholas Rossi</name>
    <email>nrossi1@uvm.edu</email>
  </author>
  
  <entry>
    <title>Understanding Cross-Correlation</title>
    <link href="http://nicholasarossi.github.io//Cross-Correlation"/>
    <updated>2017-03-20T00:00:00-04:00</updated>
    <id>http://nicholasarossi.github.io//Cross Correlation</id>
    <content type="html">&lt;script type=&quot;text/x-mathjax-config&quot;&gt;
  MathJax.Hub.Config({tex2jax: {inlineMath: [[&#39;$&#39;,&#39;$&#39;], [&#39;\\(&#39;,&#39;\\)&#39;]]}});
&lt;/script&gt;

&lt;script type=&quot;text/javascript&quot; async=&quot;&quot; src=&quot;https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML&quot;&gt;
&lt;/script&gt;

&lt;h3 id=&quot;some-things-take-time&quot;&gt;Some things take time&lt;/h3&gt;

&lt;p&gt;Hey &lt;a href=&quot;https://www.youtube.com/watch?v=sIlNIVXpIns&quot;&gt;look at this graph&lt;/a&gt;!&lt;/p&gt;
&lt;center&gt;
&lt;a align=&quot;center&quot; href=&quot;/res/blog_5/graph_1.png&quot;&gt;
&lt;img src=&quot;/res/blog_5/graph_1.png&quot; /&gt;
&lt;/a&gt;﻿
&lt;/center&gt;
&lt;p&gt;We see that the daylight in Boston and Paris follow the same basic trajectories, but the exact brightness in Boston isn’t a great predictor of the brightness in Paris. Taken a step further, if we “flatten” the data to remove the time dimension and plot the brightness in Paris vs that of Boston we get the following. Each point on the circle represents the brightness in Paris and the brightness in Boston at a specific time.&lt;/p&gt;

&lt;video controls=&quot;&quot; width=&quot;100%&quot;&gt;
  &lt;source src=&quot;/res/blog_5/flattened_1.webm&quot; type=&quot;video/webm&quot; /&gt;
  &lt;source src=&quot;/res/blog_5/flattened_1.mp4&quot; type=&quot;video/mp4&quot; /&gt;
Your browser does not support the video tag.
&lt;/video&gt;

&lt;!-- &lt;center&gt;
&lt;a align=&quot;center&quot; href=&quot;/res/blog_5/graph_2.png&quot;&gt;
&lt;img src=&quot;/res/blog_5/graph_2.png&quot;&gt;
&lt;/a&gt;﻿
&lt;/center&gt; --&gt;
&lt;p&gt;An interesting graph that contains some information, but isn’t as informative as it could be. The &lt;a href=&quot;https://en.wikipedia.org/wiki/Degenerate_conic&quot;&gt;degeneracy&lt;/a&gt; of the data makes each value non-unique, preventing us from determining the exact brightness of Paris given Boston and vice-versa.&lt;/p&gt;

&lt;p&gt;There &lt;strong&gt;is&lt;/strong&gt; an answer to this problem that allows us to relate these two signals in a more meaningful way : compare them after a &lt;strong&gt;time-shift&lt;/strong&gt;. If we compare Paris daylight to Boston 6 hours later, we find that there is much greater correlation between the two variables. In plain language, you’re comparing points from the two trajectories at different times.&lt;/p&gt;

&lt;video controls=&quot;&quot; width=&quot;100%&quot;&gt;
  &lt;source src=&quot;/res/blog_5/flattened_2.webm&quot; type=&quot;video/webm&quot; /&gt;
  &lt;source src=&quot;/res/blog_5/flattened_2.mp4&quot; type=&quot;video/mp4&quot; /&gt;
Your browser does not support the video tag.
&lt;/video&gt;
&lt;!-- &lt;a align=&quot;center&quot; href=&quot;/res/blog_5/graph_3.png&quot;&gt;
&lt;img src=&quot;/res/blog_5/graph_3.png&quot;&gt;
&lt;/a&gt;﻿ --&gt;

&lt;p&gt;This operation is the essence of &lt;a href=&quot;https://en.wikipedia.org/wiki/Cross-correlation&quot;&gt;cross-correlation&lt;/a&gt;. How much do two signals correlate with each other as you shift one of them in time. We call the magnitude of the shift $\tau$.&lt;/p&gt;
&lt;center&gt;
$$(f*g)(\tau) = \int_{-\infty}^{\infty} f^{}g(t+\tau)dt$$
&lt;/center&gt;

&lt;p&gt;Below we see the full cross-correlation of a sine and cosine wave as we move the cosine wave and keep the other fixed. We see that there is a peak cross-correlation at $ \tau=\frac{\pi}{2}$ and the signals are most anti-correlated at $ \tau=\frac{3\pi}{4}$. If you shift the signal backward or forward tau can be positive or negative (g is leading or lagging).&lt;/p&gt;

&lt;video controls=&quot;&quot; width=&quot;100%&quot;&gt;
  &lt;source src=&quot;/res/blog_5/true_1.webm&quot; type=&quot;video/webm&quot; /&gt;
  &lt;source src=&quot;/res/blog_5/true_1.mp4&quot; type=&quot;video/mp4&quot; /&gt;
Your browser does not support the video tag.
&lt;/video&gt;

&lt;h3 id=&quot;what-happens-with-noisy-data&quot;&gt;What happens with noisy data?&lt;/h3&gt;
&lt;p&gt;Cross-correlation is an extremely powerful method of analysis to use on noisy data. Just adding bit of waggle to the sine and cosine waves from above gets similar results.&lt;/p&gt;
&lt;video controls=&quot;&quot; width=&quot;100%&quot;&gt;
  &lt;source src=&quot;/res/blog_5/true_2.webm&quot; type=&quot;video/webm&quot; /&gt;
  &lt;source src=&quot;/res/blog_5/true_2.mp4&quot; type=&quot;video/mp4&quot; /&gt;
Your browser does not support the video tag.
&lt;/video&gt;

&lt;p&gt;More importantly, the analysis works even when the data is &lt;strong&gt;SUPER&lt;/strong&gt; noisy. Consider the following set of stochastic differential equations representing &lt;a href=&quot;https://en.wikipedia.org/wiki/Ornstein%E2%80%93Uhlenbeck_process&quot;&gt;Ornstein–Uhlenbeck processes&lt;/a&gt;:&lt;/p&gt;
&lt;center&gt;
$$\frac{dX}{dt} = -\theta_{x} X_{t} dt+\sigma_{x} \eta_{x}$$
$$\frac{dY}{dt} = (gX_{t}-\theta_{y}Y_{t})dt+\sigma_{y} \eta_{y}$$
&lt;/center&gt;

&lt;p&gt;Here $\theta$ represents the inverse of the correlation time of the signal while $\sigma$ represents the standard deviation of the trajectory. In this case, I’ve modeled Y as having some linear dependance on X, scaled by the gain “g”.
These equations could model any number of stochastic interactions (gene expression, weather patterns) but we’ll use them to imagine an example from the world of finance.&lt;/p&gt;
&lt;center&gt;
&lt;a href=&quot;/res/blog_5/Econ.png&quot;&gt;
&lt;img src=&quot;/res/blog_5/Econ.png&quot; /&gt;
&lt;/a&gt;﻿
&lt;/center&gt;
&lt;p&gt;Here we see two time traces representing the value of the Dollar and the value of the Euro. Despite the fluctuations in both of the signals, there seems to be some interdependency. However, the directionality of this relationship isn’t entirely apparent at first glance. We don’t know if the Dollar affects the value of the Euro or vice-versa. We turn to our new favorite technique - Cross-Correlation!!!!&lt;/p&gt;

&lt;video controls=&quot;&quot; width=&quot;100%&quot;&gt;
  &lt;source src=&quot;/res/blog_5/true_4.webm&quot; type=&quot;video/webm&quot; /&gt;
  &lt;source src=&quot;/res/blog_5/true_4.mp4&quot; type=&quot;video/mp4&quot; /&gt;
Your browser does not support the video tag.
&lt;/video&gt;

&lt;p&gt;It becomes apparent that as we shift the Euro time trace, the two trajectories become more most correlated as $\tau = - 18$ days. The value of the dollar determines (in part) that of the Euro. If this simulated data is to be believed (&lt;em&gt;wink&lt;/em&gt;), that means we should BUY BUY BUY Euros if the dollar spikes up, alternatively we should SELL SELL SELL Euros if the Dollar drops in value.&lt;/p&gt;

&lt;p&gt;Clearly real economic markets are more complicated than this as the regulation is not unilateral (ie the Euro value will feed back and affect the dollar value). But this analysis does lend insight into how we can take seemingly unrelated stochastic signals and find the underlying correlations.&lt;/p&gt;

&lt;h3 id=&quot;note-numerical-cross-correlation-is-data-hungry&quot;&gt;Note: Numerical Cross-Correlation is data hungry&lt;/h3&gt;
&lt;p&gt;If the signal to noise ration is high in a given relationship between two time-series, it may require a relatively long data set in order to detect any apparent cross-correlation. The animation bellow illustrates this point by calculating the numerical cross correlation of two time traces (blue dots) and comparing them to the exact analytical solution to the cross-correlation of the two functions.&lt;/p&gt;
&lt;video controls=&quot;&quot; width=&quot;100%&quot;&gt;
  &lt;source src=&quot;/res/blog_5/true_5.webm&quot; type=&quot;video/webm&quot; /&gt;
  &lt;source src=&quot;/res/blog_5/true_5.mp4&quot; type=&quot;video/mp4&quot; /&gt;
Your browser does not support the video tag.
&lt;/video&gt;
&lt;p&gt;In order to get the numerical calculations to converge to the exact solutions we need a relatively long simulation. This can be &lt;strong&gt;very&lt;/strong&gt; problematic when calculating cross-correlations using real data sets as it’s possible a given time-series of collected data is insufficient to effectively calculate any underlying phenomena. However, the time it takes to converge to the exact solution is a function of the signal to noise ratio and as such shorter data sets will be sufficient for less noisy data.&lt;/p&gt;

&lt;h3 id=&quot;conclusion&quot;&gt;Conclusion&lt;/h3&gt;
&lt;p&gt;Cross-correlation is an essential data science technique to understand the flow of information in dynamical systems including &lt;a href=&quot;http://www.nature.com/ng/journal/v40/n12/abs/ng.281.html&quot;&gt;genetic networks&lt;/a&gt;, &lt;a href=&quot;https://arxiv.org/abs/1002.0321&quot;&gt;finance&lt;/a&gt; and the &lt;a href=&quot;http://www.pnas.org/content/108/42/17296.full&quot;&gt;climate &lt;/a&gt;. Always remember, sometimes things take time.&lt;/p&gt;

&lt;h2 id=&quot;notes&quot;&gt;notes:&lt;/h2&gt;

&lt;ul&gt;
  &lt;li&gt;
    &lt;p&gt;I hacked this together on a couple jupyter notebooks, if you’re curious as to how I made the animations you can find the code &lt;a href=&quot;https://github.com/NicholasARossi/xcor_animations&quot;&gt;here&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Cross-correlation does assume the underlying phenomena are &lt;a href=&quot;https://en.wikipedia.org/wiki/Stationary_process&quot;&gt;stationary&lt;/a&gt; and &lt;a href=&quot;https://en.wikipedia.org/wiki/Ergodicity&quot;&gt;ergodic&lt;/a&gt;. There are work arounds for these assumptions but they are usually pretty messy.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ul&gt;
</content>
    <author>
      <name>Nicholas Rossi</name>
      <uri>http://nicholasarossi.github,io/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>How Term Limits Might Affect How Congress Works</title>
    <link href="http://nicholasarossi.github.io//congress"/>
    <updated>2016-10-20T00:00:00-04:00</updated>
    <id>http://nicholasarossi.github.io//congress</id>
    <content type="html">&lt;h3 id=&quot;question&quot;&gt;Question!:&lt;/h3&gt;

&lt;p&gt;Ever wonder if giving congress people term limits would be a good idea? Here we retcon history and imagine how things would have played out differently with only a “junior” congress.&lt;/p&gt;

&lt;h3 id=&quot;methodology&quot;&gt;Methodology:&lt;/h3&gt;
&lt;p&gt;I’m going to look at a number of landmark pieces of legislation and see first how the number of years a congressman affected their vote, and how the vote hypothetically would have played out differently if there were term limits.&lt;/p&gt;

&lt;p&gt;For the first bit I use &lt;a href=&quot;https://en.wikipedia.org/wiki/Logistic_regression&quot;&gt;logistic regression&lt;/a&gt; which is a great way to measure correlation between a categorical variable (like alive/dead, vote yea/nay) and a continuous variable (ex age, height, weight). It basically shows how the probability of being in one of the states changes with the continuous variable - in this case voting yea or nay as a function of tenure.&lt;/p&gt;

&lt;p&gt;Next, I compare the votes as they happened historically versus if everyone that had been in the house longer than 8 years wasn’t allowed to vote. This is a rough estimate to see how a “junior” congress would behave differently than the mixed bag we’ve got currently.&lt;/p&gt;

&lt;p&gt;&lt;em&gt;Note&lt;/em&gt; tenure was calculated as the number of years the congress person had been serving up to the year of the particular vote, not the total number of years they would end up serving.&lt;/p&gt;

&lt;h2 id=&quot;first-landmark--the-voting-rights-act-of-1965&quot;&gt;First Landmark : The Voting Rights Act of 1965&lt;/h2&gt;

&lt;p&gt;Below we’ve got our first set of logistic regression plots split up by party. As you can see, the probability that a democratic congressman decided to be on the wrong side of history and vote “no” for the voting rights act does correlate with how long they had been in the house.&lt;/p&gt;

&lt;p&gt;Republicans on the other hand don’t seem to be swayed by the duration of their tenure.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/res/blog_4/0.png&quot;&gt;
&lt;img src=&quot;/res/blog_4/0.png&quot; /&gt;
&lt;/a&gt;﻿&lt;/p&gt;

&lt;p&gt;Imagining how this vote would have played out had we installed term limits, we see that the same decision would have been made, albeit with more conviction.&lt;/p&gt;

&lt;iframe src=&quot;/res/blog_4/donut1.html&quot; width=&quot;100%&quot; height=&quot;400&quot; scrolling=&quot;no&quot;&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;second-landmark--the-auto-industry-financing-and-restructuring-act-of-2008&quot;&gt;Second Landmark : The Auto Industry Financing and Restructuring Act of 2008&lt;/h2&gt;

&lt;p&gt;Interestingly, this second bill to “save” the auto-industry is in many ways the opposite of the voting rights act. The Dems don’t correlate their votes with tenure, while the more senior republicans were more likely to vote in favor of the bail-out.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/res/blog_4/1.png&quot;&gt;
&lt;img src=&quot;/res/blog_4/1.png&quot; /&gt;
&lt;/a&gt;﻿&lt;/p&gt;

&lt;p&gt;Consequently, if we had installed term limits this vote may not have gone the same way. Discounting all senior congressmen shows that the results would have played out differently.&lt;/p&gt;

&lt;iframe src=&quot;/res/blog_4/donut2.html&quot; width=&quot;100%&quot; height=&quot;400&quot; scrolling=&quot;no&quot;&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;third-landmark--the-authorization-for-use-of-military-force-against-iraq-resolution-of-2002&quot;&gt;Third Landmark : The Authorization for Use of Military Force Against Iraq Resolution of 2002&lt;/h2&gt;

&lt;p&gt;This is possibly the most contentious act of congress in the last 20 years - one that would define the political careers of many. Incidentally, it is also the case I examined that showed the lowest degree of relationship with tenure.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;/res/blog_4/2.png&quot;&gt;
&lt;img src=&quot;/res/blog_4/2.png&quot; /&gt;
&lt;/a&gt;﻿&lt;/p&gt;

&lt;p&gt;Additionally, had their been term limits, it’s doubtful much would have changed.&lt;/p&gt;

&lt;iframe src=&quot;/res/blog_4/donut3.html&quot; width=&quot;100%&quot; height=&quot;400&quot; scrolling=&quot;no&quot;&gt;&lt;/iframe&gt;

&lt;h3 id=&quot;big-take-aways&quot;&gt;Big Take Aways:&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Term limits do have the power to affect decisions like the auto-bailout and the voting rights act where conservative ideology plays a stronger role.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;More personal or partisan decisions like the Iraq war vote seem less affected.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;h3 id=&quot;notes-for-nerds&quot;&gt;Notes for Nerds:&lt;/h3&gt;
&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;Analysis done with Python using data from &lt;a href=&quot;https://www.govtrack.us/&quot;&gt;govetrack.us&lt;/a&gt;.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Visualizations were done with seaborn and D3.js&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Code and Data available &lt;a href=&quot;https://github.com/NicholasARossi/Congressional-Tenure-Analysis&quot;&gt;here&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</content>
    <author>
      <name>Nicholas Rossi</name>
      <uri>http://nicholasarossi.github,io/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>Global Trends in Cigarette Consumption</title>
    <link href="http://nicholasarossi.github.io//cigarettes"/>
    <updated>2016-10-15T00:00:00-04:00</updated>
    <id>http://nicholasarossi.github.io//cigarettes</id>
    <content type="html">&lt;h2 id=&quot;smoking-is-a-lot-more-prevalent-in-certain-places&quot;&gt;Smoking is a lot more prevalent in certain places&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;/res/blog_3/smoker.jpg&quot; align=&quot;left&quot; width=&quot;30%&quot; /&gt;&lt;/p&gt;

&lt;p&gt;There are certain countries that have a much larger smoking population than others - ranging from countries like Ethiopia that have less than 5% of a smoking population to countries like Jordan where it’s closer to 40%.
&lt;!-- &lt;div class=&quot;full zoomable&quot;&gt;&lt;img src=&quot;/res/blog_3/Percentage_smokers.PNG&quot;&gt;&lt;/div&gt; --&gt;
&lt;!-- ![Percentage Smokers](/res/blog_3/Percentage_smokers.PNG) --&gt;
&lt;a href=&quot;/res/blog_3/Percentage_smokers.png&quot;&gt;
&lt;img src=&quot;/res/blog_3/Percentage_smokers.png&quot; /&gt;
&lt;/a&gt;﻿&lt;/p&gt;

&lt;h2 id=&quot;certain-countries-have-super-intense-smokers&quot;&gt;Certain countries have super intense smokers&lt;/h2&gt;

&lt;p&gt;Just looking at the average number of cigarettes that a smoker consumes per country, it’s clear to see that not everyone smokes the same way. While we can imagine that there is a distribution of cigarette consumption among smokers in a country, just looking at the mean consumption per smoker shows that there are countries like Slovenia and Bulgaria where smokers consume on average just under 40 cigarettes per day (about 2 packs).
&lt;img src=&quot;/res/blog_3/cigarettes_per_smoker.png&quot; alt=&quot;Cigarettes per Smoker&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;countries-that-have-the-most-smokers-do-not-necessarily-smoke-the-most&quot;&gt;Countries that have the most smokers do not necessarily smoke the most&lt;/h2&gt;

&lt;p&gt;The graph below show the weak correlation between the the percentage of smokers in a country and the average number of cigarettes they smoke per day (Spearman’s R: 0.36, p value=0.0001).&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/res/blog_3/comparison.png&quot; alt=&quot;Relationship&quot; /&gt;&lt;/p&gt;

&lt;p&gt;A good example the disparity between frequency and volume France vs the USA. &lt;a href=&quot;/res/blog_3/letired.png&quot;&gt;Stereotypes&lt;/a&gt; would have us believe that everyone in France smokes. Indeed, smoking is more common France - about ~27.6% of people smoke in France compared to ~17.2% in the states. However, Americans always believe that if something is worth doing, it’s worth overdoing - so american smokers consume on average 17 cigarettes per day (there are 20 in a pack) while French people struggle to consume just under 10 on average. USA! USA! USA!&lt;/p&gt;

&lt;p&gt;The chart below shows the countries where smoking is the most frequent, and the countries that have the most &lt;em&gt;committed&lt;/em&gt; smokers. There is some overlap, but the rankings are very different for the two metrics.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/res/blog_3/cig_subplots.png&quot; alt=&quot;Top Countries&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;why-cigarettes-per-smoker-and-not-cigarettes-per-capita&quot;&gt;Why cigarettes per smoker and not cigarettes per capita?&lt;/h2&gt;

&lt;p&gt;Well simply put cigarette consumption follows a &lt;a href=&quot;https://en.wikipedia.org/wiki/Multimodal_distribution&quot;&gt;non-normal distribution&lt;/a&gt;, therefore the “mean” doesn’t have much significance. To use (albeit crude) statistics humor - humans have on average one testicle and one breast which doesn’t cary much information about how human anatomy is distributed! Similarly there are people that smoke and those that don’t - it’s best to understand how those groups function independently.&lt;/p&gt;

&lt;h2 id=&quot;notes-for-nerds&quot;&gt;Notes for Nerds:&lt;/h2&gt;

&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;The data came from the &lt;a href=&quot;http://apps.who.int/gho/data/node.sdg.3-a-viz?lang=en&quot;&gt;WHO&lt;/a&gt; as well as &lt;a href=&quot;https://en.wikipedia.org/wiki/List_of_countries_by_cigarette_consumption_per_capita&quot;&gt;wikipedia&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Analysis was done with Python; visualizations with &lt;a href=&quot;http://vincent.readthedocs.io/en/latest/&quot;&gt;vincent&lt;/a&gt; and &lt;a href=&quot;http://stanford.edu/~mwaskom/software/seaborn/&quot;&gt;seaborn&lt;/a&gt;. Maps touched up with Illustrator.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Code and munged data available &lt;a href=&quot;https://github.com/NicholasARossi/Global-Smoking-Analysis/tree/master&quot;&gt;here&lt;/a&gt;&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;Disregard cigarettes, acquire dry land
&lt;img src=&quot;/res/blog_3/the_gentleman_guppy.gif&quot; alt=&quot;Gentleman Guppy&quot; /&gt;&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</content>
    <author>
      <name>Nicholas Rossi</name>
      <uri>http://nicholasarossi.github,io/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>Musical Systems Analysis</title>
    <link href="http://nicholasarossi.github.io//Musical-Systems"/>
    <updated>2016-09-18T00:00:00-04:00</updated>
    <id>http://nicholasarossi.github.io//Musical Systems</id>
    <content type="html">&lt;h2 id=&quot;intro&quot;&gt;Intro&lt;/h2&gt;
&lt;p&gt;A motif is a recurring element - a pattern that is found more often than would occur by chance. They are essential in all ordered systems, from genetic networks to the patterns of social interaction. Today we’re going to talk about their role in music while we reviewing the ways that you can teach robots to write songs.&lt;/p&gt;

&lt;h2 id=&quot;roll-the-dice-maybe-itll-sound-good&quot;&gt;Roll the dice, maybe it’ll sound good&lt;/h2&gt;
&lt;p&gt;For the purposes of this post, we’re going to understand a musical work as a simple sequence of notes. How we move from one note to the next is what produces this emergent “musicality”. The foundation of most robot-composers like &lt;a href=&quot;https://en.wikipedia.org/wiki/Emily_Howell&quot;&gt;Emily Howell&lt;/a&gt; are &lt;a href=&quot;https://en.wikipedia.org/wiki/Markov_chain&quot;&gt;markov chains&lt;/a&gt;. For more information on what those are, and to see some of the foundational code that made this post possible, read &lt;a href=&quot;http://setosa.io/ev/markov-chains/&quot;&gt;Victor Powell&lt;/a&gt;, he is master of us all. Markov chains can be used to create biased random walks between notes which, absent of any grand form, can still produce musicality.&lt;/p&gt;
&lt;p&gt;
The network bellow shows one such markov chain that hops around the pentatonic scale. This scale is nice for generating random music because it lacks any dissonant intervals.
&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://upload.wikimedia.org/score/7/5/756b1ensi3iu6vn4elyyb4uwcgn0z1u/756b1ens.png&quot; alt=&quot;pentatonic scale&quot; /&gt;&lt;/p&gt;

&lt;p&gt; This biased random walk reveals that certain notes are favored, a phenomenon emerging from the probabilty weights between the jumps. Play with the speed and unmute it to hear this network performed. Note, I added some random rhythms on top just to keep the notes interesting (quarter and eight notes, 50% probability each)&lt;/p&gt;

&lt;!-- How markov chains produce distributions --&gt;
&lt;iframe src=&quot;/res/blog_2/random-sequence-markov.html&quot; width=&quot;100%&quot; height=&quot;400&quot; scrolling=&quot;no&quot;&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;lets-go-data-mining&quot;&gt;Let’s go data mining!&lt;/h2&gt;
&lt;p&gt;So the figure above showed that a biased random network can generate the semblance of musicality. However, the weights between the nodes (or the probability of each transition) are super important in making your robo-music not sound like utter garbage. In order to “discover” the appropriate weights, I told my computer to scrape a bunch of songs from the web, analyze them, and tell me how we transition from one note to the next. It was &lt;a href=&quot;/res/blog_2/algorithm.png&quot;&gt;complicated&lt;/a&gt;. Below we see the note and interval distributions from  ~2000 pop songs.
&lt;img src=&quot;/res/blog_2/int_dist.png&quot; alt=&quot;distributions&quot; /&gt;&lt;/p&gt;

&lt;p&gt;These are produced from what might come from a summing up a bunch of histograms like the animated one above for a whole slew of pop songs. The interval diagram (the distance from one note to the next) shows that clearly not moving at all (staying on the same note) is the most favored transition. This is emphasized by looking at our case-study song, Bad romance by Lady Gaga, and fitting a few different distributions to show how we move throughout this song.&lt;/p&gt;

&lt;center&gt;&lt;img src=&quot;/res/blog_2/romance2.png&quot; alt=&quot;Romance &quot; style=&quot;width: 50%;&quot; /&gt;&lt;/center&gt;

&lt;p&gt;Say what you will, but i’m calling that as an exponential distribution. This fact can be used to inform our procedural music model later on.&lt;/p&gt;

&lt;h2 id=&quot;je-veux-ton-amour-et-je-veux-ta-revanche&quot;&gt;Je veux ton amour et je veux ta revanche&lt;/h2&gt;
&lt;p&gt;There is an important element that these simple random walks can’t quite capture though : the motif. We can think of motifs in music as hooks. The melody you’ll hum when you think of the song. Take Bad Romance by Lady Gaga, the hook is &lt;a href=&quot;https://www.youtube.com/watch?v=Rwp8ZlYkg_I&quot;&gt;unforgetable&lt;/a&gt;. However let’s try to generate it from a markov chain:
&lt;!-- Example Motif From mother monster --&gt;
&lt;img src=&quot;/res/blog_2/gaga.png&quot; alt=&quot;Gaga Fugue&quot; style=&quot;width: 200px;&quot; /&gt;
&lt;!-- ![Gaga Fugue](/res/blog_2/gaga.png){ width: 50px; } --&gt;&lt;/p&gt;
&lt;iframe src=&quot;/res/blog_2/markov.html&quot; width=&quot;100%&quot; height=&quot;400&quot; scrolling=&quot;no&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;Using all of my stats power, I can say (not counting rhythm) that even with the optimal weights we’re still looking at ~3% chance that the hook will be generated if you start on the tonic. Not so hot. As a result we need to generate musicality not just from the probabilities of note transitions, but also the recurrence of grander symmetry.&lt;/p&gt;

&lt;p&gt;Real full-blown actual real life scientists have studied this problem and used fancy math to analyze the frequency of &lt;a href=&quot;http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3309746/&quot;&gt;recurrent patterns&lt;/a&gt;. For me I’m just gonna prospect the hooks.&lt;/p&gt;

&lt;p&gt;Going back to our data and using some computer science shenanigans we can find which patterns are most common, as is demonstrated by the graph below (see github for how this was done):&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/res/blog_2/total_motifs.png&quot; alt=&quot;total motifs&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Note the presence of the RA-AH-GA-GA-AH-AH echoed in some of the prospected motifs (hint 62 is middle - C). Clearly some imperfect musical fragments were also recovered, but overall we see that it not just about probabilities between notes, there are also bigger patterns that recur.&lt;/p&gt;

&lt;p&gt;Prospecting the most common motif from all 5000 songs reveals what approximates to be a zero-mean Markovian process for each of the hooks if you center them at the same starting pitch.
&lt;img src=&quot;/res/blog_2/all_motifs.png&quot; alt=&quot;all motifs&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;pulling-it-all-together&quot;&gt;Pulling it all together&lt;/h2&gt;

&lt;p&gt;So how do we know that any of this actually makes something sound musical? Well, we need to give a robot these rules that we found to be common in other peoples music, and ask it to use them to generate new music. I did just that when I wrote an evolutionary algorithm bringing together both the ideas of Markovian interactions and motif recurrence to turn this:&lt;/p&gt;

&lt;audio controls=&quot;&quot;&gt;
  &lt;source src=&quot;/res/blog_2/random_music.mp3&quot; type=&quot;audio/mpeg&quot; /&gt;
&lt;/audio&gt;

&lt;p&gt;into this:&lt;/p&gt;

&lt;audio controls=&quot;&quot;&gt;
  &lt;source src=&quot;/res/blog_2/example.mp3&quot; type=&quot;audio/mpeg&quot; /&gt;
&lt;/audio&gt;

&lt;p&gt;Not perfect, but you can hear the elements coming together.&lt;/p&gt;

&lt;h2 id=&quot;tldr&quot;&gt;tl;dr&lt;/h2&gt;

&lt;iframe width=&quot;560&quot; height=&quot;315&quot; src=&quot;https://www.youtube.com/embed/cTKlHhLE6Tc&quot; frameborder=&quot;0&quot; allowfullscreen=&quot;&quot;&gt;&lt;/iframe&gt;

&lt;h2 id=&quot;notes-for-nerds&quot;&gt;Notes for Nerds:&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;
    &lt;p&gt;The musical markov chain visualizations were done by adapting &lt;a href=&quot;http://setosa.io/ev/markov-chains/&quot;&gt;this&lt;/a&gt;, with help from &lt;a href=&quot;https://mudcu.be/midi-js/&quot;&gt;midi.js&lt;/a&gt;.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;The web-scrapping took midi files from various repositories across the web and parsed them with &lt;a href=&quot;https://www.crummy.com/software/BeautifulSoup/bs4/doc/&quot;&gt;Beautiful Soup&lt;/a&gt; and &lt;a href=&quot;https://github.com/vishnubob/python-midi&quot;&gt;python midi libraries&lt;/a&gt;. Code and sample midi files available &lt;a href=&quot;https://github.com/NicholasARossi/musical_systems/tree/master&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;I used matlab to write the evolutionary algorithm to combine the themes and write the novel music (I almost never use matlab but I had some code I previously wrote that made it easy). Not available on github, but just email me if you have questions.&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;
</content>
    <author>
      <name>Nicholas Rossi</name>
      <uri>http://nicholasarossi.github,io/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>Pizza Post</title>
    <link href="http://nicholasarossi.github.io//pizza"/>
    <updated>2016-08-07T00:00:00-04:00</updated>
    <id>http://nicholasarossi.github.io//pizza</id>
    <content type="html">&lt;p&gt;So we all know the bigger the pizza, &lt;a href=&quot;http://www.npr.org/sections/money/2014/02/26/282132576/74-476-reasons-you-should-always-get-the-bigger-pizza&quot;&gt;the better the deal&lt;/a&gt;. The price per square inch decreases dramatically as you increase pizza size. But there&#39;s so much more to do with pizza math! For the following graphs I assume uniform thickness among pizzas (obvious conciet) but beyond that we just need equations for area an circumference of a circle. Presto pesto!&lt;/p&gt;
&lt;div class=&quot;language-go highlighter-rouge&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;n&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pizza_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;price&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;diameter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calculates&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;price&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;per&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;square&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inch&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;price&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;diameter&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;**&lt;/span&gt;&lt;span class=&quot;m&quot;&gt;2&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;))&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;def&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crust_value&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;price&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;diameter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;:&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;err&quot;&gt;#&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;calculates&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;price&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;per&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inch&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;of&lt;/span&gt;&lt;span class=&quot;x&quot;&gt; &lt;/span&gt;&lt;span class=&quot;n&quot;&gt;crust&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
    &lt;/span&gt;&lt;span class=&quot;k&quot;&gt;return&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;price&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;np&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;pi&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;*&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;diameter&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;)))&lt;/span&gt;&lt;span class=&quot;x&quot;&gt;
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;

&lt;h2 id=&quot;pizza-geometry&quot;&gt;Pizza Geometry&lt;/h2&gt;
&lt;p&gt;What does pizza size mean visually? Mouse over the data below for sample pizzas from the &lt;font color=&quot;red&quot;&gt;Pizza Hut&lt;/font&gt;, &lt;font color=&quot;blue&quot;&gt;Dominos&lt;/font&gt; and &lt;font color=&quot;green&quot;&gt;Papa Johns&lt;/font&gt; in Minnesota. A lower price per square inch means a better deal on the pizza.&lt;/p&gt;
&lt;iframe src=&quot;/res/blog_1/minnesota.html&quot; width=&quot;100%&quot; height=&quot;400&quot; scrolling=&quot;no&quot;&gt;&lt;/iframe&gt;

&lt;p&gt;We see how value scales with increased pizza size, but what of other qualities? Well, we should talk about crust. Crust is the pulp of pizza - a highly divisive feature and one that should always be considered when choosing pizza size. The data below shows some randomly sampled pizza from across the states and how they scale pizza value () &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/res/blog_1/swarm.png&quot; width=&quot;100%&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The Big take away from this is that due to trends in pizza pricing, if you really like crust you should just get a bunch of personal pan pizzas from Pizza hoot, or get cheese pizzas from dominoms.&lt;/p&gt;

&lt;h2 id=&quot;a-tale-of-three-pizzas&quot;&gt;A tale of three pizzas&lt;/h2&gt;
&lt;p&gt;Zooming in again on pizza value, combining data from all the states and all venders shows considerable price differences between pizzahoot, dominoms and pepe jose&#39;s&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/res/blog_1/stateviolin.png&quot; width=&quot;100%&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;the-state-of-pizza&quot;&gt;The state of pizza&lt;/h2&gt;
&lt;p&gt;Also, where you&#39;re buying your pizza can really affect things. A sampling of different states for all three venders shows DC is actually the most expensive place, while the midwest and the south show cheaper prices on average. Although, with the variability in specialty toppings there ends up being a lot of overlap.&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/res/blog_1/statebox.png&quot; width=&quot;100%&quot; /&gt;&lt;/p&gt;

&lt;h2 id=&quot;big-take-aways&quot;&gt;Big take aways&lt;/h2&gt;
&lt;p&gt;Buy bigger pizza if you can afford it. Live in Mississipi if you can. Only pizza hut can help you if you really love crust.&lt;/p&gt;

&lt;h2 id=&quot;notes&quot;&gt;Notes:&lt;/h2&gt;
&lt;ol&gt;
  &lt;li&gt;This was all done in Python&lt;/li&gt;
  &lt;li&gt;I used &lt;a href=&quot;http://www.seleniumhq.org/&quot;&gt;selenium&lt;/a&gt; and &lt;a href=&quot;https://www.crummy.com/software/BeautifulSoup/&quot;&gt;beautiful soup&lt;/a&gt; for webscrapping the data that I got from &lt;a href=&quot;http://www.fastfoodmenuprices.com/&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;First visualization was done with the &lt;a href=&quot;http://mpld3.github.io/&quot;&gt;mpld3&lt;/a&gt;; the others were done with &lt;a href=&quot;https://stanford.edu/~mwaskom/software/seaborn/&quot;&gt;seaborn&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;Code can be found &lt;a href=&quot;https://github.com/NicholasARossi/pizza_math&quot;&gt;here&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
</content>
    <author>
      <name>Nicholas Rossi</name>
      <uri>http://nicholasarossi.github,io/about/</uri>
    </author>
  </entry>
  
  <entry>
    <title>Welcome!</title>
    <link href="http://nicholasarossi.github.io//welcome"/>
    <updated>2016-08-01T00:00:00-04:00</updated>
    <id>http://nicholasarossi.github.io//welcome</id>
    <content type="html">&lt;p&gt;Hey! This is the first post in what will hopefully be a long and fruitful foray into the overcrowded world of data science blogging. I hope to share with you some insightful bits and well as a good helping of glorious infectious confusion. Later!
&lt;br /&gt;
-Nick&lt;/p&gt;
</content>
    <author>
      <name>Nicholas Rossi</name>
      <uri>http://nicholasarossi.github,io/about/</uri>
    </author>
  </entry>
  
</feed>
